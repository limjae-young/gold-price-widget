
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>실시간 금시세</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: linear-gradient(to bottom, #fffaf0, #f7e9d3);
      color: #333;
      padding: 20px;
    }
    h2 {
      text-align: center;
      font-size: 24px;
      margin-bottom: 20px;
      color: goldenrod;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 15px;
      text-align: center;
      font-size: 18px;
    }
    th {
      background-color: #fff2cc;
      font-weight: bold;
    }
    .highlight {
      font-size: 22px;
      font-weight: bold;
      color: #b8860b;
    }
    .updated {
      text-align: right;
      font-size: 14px;
      color: gray;
    }
  </style>
</head>
<body>
  <h2>한국금거래소 기준 실시간 금시세</h2>
  <div class="updated" id="updateTime">업데이트 중...</div>
  <table>
    <thead>
      <tr>
        <th>상품명</th>
        <th>살 때 (매입가)</th>
        <th>팔 때 (판매가)</th>
      </tr>
    </thead>
    <tbody id="goldTable">
      <tr><td colspan="3">로딩 중...</td></tr>
    </tbody>
  </table>

  <script>
    async function fetchGoldPrice() {
      const url = "https://apis.data.go.kr/1160100/service/GetGeneralProductInfoService?serviceKey=9JgAeDcSblPkyuAMs%252B4arPHJaSsx1td1s1%252BLtdr5tXMumCuinAD%252B6xPMQzpSHJdrmnOgBc%252Fm5o9kTpyTA%253D&pageNo=1&numOfRows=10&resultType=json";

      try {
        const response = await fetch(url);
        const data = await response.json();
        const items = data.response.body.items.item;

        const goldRows = items.filter(item => 
          item.prdlstNm.includes("순금") || item.prdlstNm.includes("18K") || item.prdlstNm.includes("14K")
        ).map(item => {
          return `
            <tr>
              <td class="highlight">${item.prdlstNm}</td>
              <td>${parseInt(item.bfprc).toLocaleString()} 원</td>
              <td>${parseInt(item.afprc).toLocaleString()} 원</td>
            </tr>
          `;
        }).join("");

        document.getElementById("goldTable").innerHTML = goldRows;
        const now = new Date().toLocaleString("ko-KR");
        document.getElementById("updateTime").innerText = "최종 업데이트: " + now;

      } catch (e) {
        document.getElementById("goldTable").innerHTML = `<tr><td colspan="3">데이터 불러오기 실패</td></tr>`;
        console.error(e);
      }
    }

    fetchGoldPrice();
    setInterval(fetchGoldPrice, 60000); // 1분마다 자동 갱신
  </script>
</body>
</html>
